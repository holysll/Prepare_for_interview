---
layout: post
title: 爬虫相关知识
date: 2020-07-08 18:22:26
updated: 2020-07-08 18:38:20
tags:
  - python
  - 爬虫
categories: python爬虫
---

> 本文主要对爬虫相关知识进行梳理、回顾，以及一些常见情况的掌握。

<!-- more -->

<div style='display: none'>

<!-- TOC -->

- [爬虫知识](#爬虫知识)
    - [1. Scrapy框架原理](#1-scrapy框架原理)
    - [2. 反爬手段](#2-反爬手段)
    - [3. 常见反爬虫应对方法](#3-常见反爬虫应对方法)
    - [4. 投毒反爬策略](#4-投毒反爬策略)
    - [5. 分布式爬虫](#5-分布式爬虫)

<!-- /TOC -->

</div>

# 爬虫知识

## 1. Scrapy框架原理

## 2. 反爬手段

- 遵守robots协议
- 限制访问频率
- 验证码
- 多账号反爬
- 代理池
- 分布式爬虫
- cookies
- 移动端app爬取
- PhantomJS/Selenium模拟浏览器

## 3. 常见反爬虫应对方法

- 通过Headers反爬虫
- 基于用户行为反爬虫
- 动态页面的反爬虫
- 通过前端css和HTML标签混淆干扰
  - 自定义自提干扰（汽车之家帖子、猫眼电影评分）
  - 伪元素隐藏（汽车之家、美团价格）
  - html标签干扰
  - 字体替换（去哪儿m版酒店价格）
- 投毒喂毒反爬虫

## 4. 投毒反爬策略

> 从链接发现下手可以搞一些正常的url pattern 的页面 链接做成隐藏链接 正常用户看不到（比如白底白字，或者被遮盖） 但是大部分爬虫就爬进去了 然后就对这些ip做惩罚就行了比如www.xxx.com?id=12345 大部分id参数是正常页面 把一些id做成只有隐藏链接的假id 监控这些页面被访问的ip 然后收割

> 反爬分级：

- 青铜反爬：请求头上做点基本的检验
- 白银反爬：限制访问频率，封 IP，跳图形验证码，infinite redirect loop，需要登录
- 黄金反爬：前端 js script 实时计算 parameter 加给请求在后端进行验证
- 铂金反爬：翻页使用 ajax ，没有 pagination ，数据以 json 形式在前端异步加载，验证参数不正确随机截断 html
- 钻石反爬：异地登录需要手机短信验证，拖动、拼图等各类人机验证码
- 王者反爬：前端写的代码让你的爬虫在 parse html 阶段的测试，难度上升为 nlp

## 5. 分布式爬虫

> 分布式作用是：防止对方封IP，以及避免使用代理IP，因为一些实时性要求比较高的爬虫系统，使用代理IP响应时间太长。